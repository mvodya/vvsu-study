# Лабораторная работа №8 - API сервер на Node.js (Express.js)

## Задание

Освоить основы разработки API сервера на Node.js с использованием Express.js и подключить к нему клиентское приложение на Next.js. Реализовать простую систему управления данными (CRUD) на примере котов: просмотр списка, добавление и удаление

## Условия

* API сервер реализовать на **Node.js + Express.js**
* Данные хранить **в памяти** (без базы данных)
* Клиент реализовать на **Next.js**
* Использовать **React (JSX, JavaScript)**
* Использовать **Tailwind CSS**
* На клиенте должно быть 3 страницы:
  * список котов
  * добавление кота
  * удаление кота
* Взаимодействие клиента с сервером выполнять через `fetch`
* Формат данных - **JSON**

## Структура проекта

В этой лабораторной будет два отдельных проекта:

1. `lab8-api` - API сервер (Express)
2. `lab8-client` - клиент (Next.js)

Рекомендуемая структура папок:

```txt
lab8/
├─ lab8-api/
└─ lab8-client/
```

## 1. API сервер (Express)

### Создание проекта

```bash
mkdir lab8-api
cd lab8-api
npm init -y
npm install express
```

Создать файл:

```txt
index.js
```

Запуск сервера:

```bash
node index.js
```

### Модель данных

Кот должен хранить:

* `id` (число или строка)
* `name` (строка)
* `age` (число)
* `weight` (число)

Данные должны храниться в памяти, например в массиве `cats`

### API маршруты

Реализовать следующие маршруты:

#### Получить список котов

* Метод: `GET`
* URL: `/api/cats`
* Ответ: JSON массив котов

Пример ответа:

```json
[
  { "id": 1, "name": "Кузя", "age": 3, "weight": 4.2 },
  { "id": 2, "name": "Дуся", "age": 1, "weight": 2.8 }
]
```

#### Добавить кота

* Метод: `POST`
* URL: `/api/cats`
* Тело запроса: JSON объект `{ name, age, weight }`
* Ответ: добавленный кот (включая `id`)

Пример запроса:

```json
{ "name": "Ася", "age": 2, "weight": 3.5 }
```

Пример ответа:

```json
{ "id": 3, "name": "Ася", "age": 2, "weight": 3.5 }
```

Требования:

* Проверить входные данные:

  * `name` не пустой
  * `age` число и больше или равно 0
  * `weight` число и больше 0
* При ошибке возвращать `400` и JSON с полем `error`

#### Удалить кота по id

* Метод: `DELETE`
* URL: `/api/cats/:id`
* Ответ: JSON объект с результатом

Пример ответа:

```json
{ "ok": true }
```

Требования:

* Если кот не найден - вернуть `404` и JSON с `error`

### Проверка API

Проверить работу API любым способом:

* браузер (GET запрос)
* Postman / RapidAPI Client / Insomnia

---

## 2. Клиент (Next.js)

### Создание проекта

Создать проект:

```bash
npx create-next-app@latest lab8-client
cd lab8-client
npm run dev
```

При создании проекта включить Tailwind CSS

### Страницы

Сайт должен иметь 3 страницы

#### Страница списка котов

URL:

```txt
/
```

Требования:

* При открытии страницы запросить список котов с API (`GET /api/cats`)
* Отобразить список котов (карточками или таблицей)
* У каждого кота отображать:
  * имя
  * возраст
  * вес
  * id

#### Страница добавления кота

URL:

```txt
/add
```

Требования:

* Форма с полями:
  * name
  * age
  * weight
* Кнопка Добавить
* При нажатии отправлять запрос на API (`POST /api/cats`)
* После успешного добавления:
  * очистить форму или показать сообщение
  * можно добавить кнопку перехода на список

Проверку ввода выполнить в JavaScript:

* name не пустой
* age число и больше или равно 0
* weight число и больше 0

#### Страница удаления кота

URL:

```txt
/delete
```

Требования:

* Поле ввода `id`
* Кнопка Удалить
* При нажатии отправлять запрос на API (`DELETE /api/cats/:id`)
* После удаления показать сообщение:
  * успешно удалено
  * либо ошибка (если id не найден)

### Работа с API

В клиенте адрес API можно хранить в переменной:

```js
const API_URL = "http://localhost:3001";
```

Запросы выполнять через `fetch`.

## Итого

### 1. API сервер (Express) - 45%

Требования:

1. Реализовать хранение котов в массиве (в памяти)
2. Реализовать маршруты:
   * GET `/api/cats`
   * POST `/api/cats`
   * DELETE `/api/cats/:id`
3. Реализовать проверки входных данных (валидацию)
4. Возвращать корректные HTTP коды:
   * 200 (успех)
   * 400 (ошибка запроса)
   * 404 (не найдено)

### 2. Клиент: список котов - 20%

Требования:

1. Страница `/`
2. Запрос списка котов с сервера
3. Отображение списка на странице
4. Оформление Tailwind CSS

### 3. Клиент: добавление кота - 20%

Требования:

1. Страница `/add`
2. Форма ввода name, age, weight
3. Отправка POST запроса
4. Проверка ввода в JavaScript
5. Оформление Tailwind CSS

### 4. Клиент: удаление кота - 15%

Требования:

1. Страница `/delete`
2. Ввод id кота
3. Отправка DELETE запроса
4. Вывод результата (успешно или ошибка)
5. Оформление Tailwind CSS

| Критерий                | Баллы |
| ----------------------- | :---: |
| API сервер (Express)    |  45 % |
| Клиент: список котов    |  20 % |
| Клиент: добавление кота |  20 % |
| Клиент: удаление кота   |  15 % |
| **Всего**               | 100 % |
